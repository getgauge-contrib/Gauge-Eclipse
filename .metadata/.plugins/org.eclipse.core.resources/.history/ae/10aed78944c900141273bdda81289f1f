grammar io.getgauge.Spec 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

generate spec "http://www.getgauge.io/Spec"

Model:
	{Model}
	(((definitions+=AbstractEntity) | COMMENT_TEXT) SINGLE_NL)+
;

AbstractEntity:
	Spec | Scenario | Step
;

Spec:
	'# ' name+=(WORD | SEPARATORS)+ SINGLE_NL+
;

Scenario:
	'## ' name+=(WORD | SEPARATORS)+ SINGLE_NL+
;

Step:
	{Step}
	'* ' (((staticParams+=StaticParam) | (dynamicParams+=DynamicParam) | WORD) SEPARATORS*)+ SINGLE_NL+
;

terminal SINGLE_NL:
	'\r'? '\n'
;

terminal WORD: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*;

terminal SEPARATORS:
	!('\r' | '\n' | 'a'..'z' | 'A'..'Z' | '0'..'9' | '_' ) 
;

StaticParam:
	value=STATIC_PARAM
;

DynamicParam:
	'<' type=('table'|'file') ':' value=DYNAMIC_PARAM_VALUE '>'
;

terminal DYNAMIC_PARAM_VALUE:
	WORD ('.'('txt'|'csv'))?
;
terminal STATIC_PARAM:
	'"' -> '"'
;

Comment:
	text=COMMENT_TEXT SINGLE_NL*
;

terminal COMMENT_TEXT:
	!('#'|'*') -> SINGLE_NL
;